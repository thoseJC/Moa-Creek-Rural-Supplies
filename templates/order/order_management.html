<link rel="stylesheet" href="{{ url_for('static', filename='styles/order_management.css') }}"/>

{% extends "base.html" %} 
{% block content %}
<h1>Order Management</h1>

<table>
    <thead>
        <tr>
            <th>Order ID</th>
            <th>Customer ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Total</th>
            <th>GST</th>
            <th>Freight</th>
            <th>Order Date</th>
            <th>Order Status</th>
            <th>Edit</th>
        </tr>
    </thead>

    <tbody>
        {% for ords in orders_list %}
        <tr>
            <td>{{ ords[0] }}</td>
            <td>{{ ords[1] }}</td>
            <td>{{ ords[8] }}</td>
            <td>{{ ords[9] }}</td>
            <td>{{ ords[4] }}</td>
            <td>{{ ords[5] }}</td>
            <td>{{ ords[6] }}</td>
            <td>{{ ords[3] }}</td>
            <td>{{ ords[7] }}</td>
            <td class="edit_box">
                <form action="{{ url_for('order_page.update_order_status') }}" method="post">

                    <!-- pass parameter 'order_id' -->
                    <input type="hidden" name="order_id" value="{{ ords[0] }}">

                    <!-- pass parameter 'order_status' -->
                        <select name="order_status">
                            <option value="Pending" {% if ords[7] == 'Pending' %}selected{% endif %}>Pending</option>
                            <option value="Prepared" {% if ords[7] == 'Prepared' %}selected{% endif %}>Prepared</option>
                            <option value="Ready for Delivery" {% if ords[7] == 'Ready for Delivery' %}selected{% endif %}>Ready for Delivery</option>
                            <option value="Delivered" {% if ords[7] == 'Delivered' %}selected{% endif %}>Delivered</option>
                            <option value="Cancelled" {% if ords[7] =='Cancelled' %}selected{% endif %}>Cancelled</option>
                        </select>
                  
                    <button type="submit"> Update Status </button>

                </form>

                <!-- send order status update message -->
                <form action="{{ url_for('order_page.send_message_order_status') }}" method="post">
                    <input type="hidden" name="user_id" value="{{ ords[1] }}">
                    <button type="submit">Send Notification</button>
                </form>

            </td>
        </tr>
        {% endfor %}
    </tbody>

</table>

{% endblock %}
